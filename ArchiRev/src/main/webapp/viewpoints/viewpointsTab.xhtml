<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<p:tab title="Viewpoints">

		<p:panel id="viewpointsPanel" widgetVar="viewpointsPanel"
			header="Viewpoints" toggleable="true" toggleSpeed="500"
			style="margin-bottom:10px; width:100%" width="100%">

			<p:panelGrid style="width:100%; border: none;" columns="2">

				<p:outputPanel>

					<p:dataTable id="availableViewpointsTable"
						widgetVar="availableViewpointsTable"
						value="#{viewpointController.availableViewpoints}" var="viewpoint">

						<p:ajax event="rowToggle"
							listener="#{viewpointController.onRowToggle}" />

						<p:column style="width:16px">
							<p:rowToggler />
						</p:column>
						<p:column headerText="Name" filterBy="#{viewpoint.name}" filterMatchMode="contains">
							<h:outputText value="#{viewpoint.name}" />
						</p:column>
						<p:column headerText="Scope" filterBy="#{viewpoint.scope.name}"
							filterMatchMode="in">
							<f:facet name="filter">
								<p:selectCheckboxMenu label="Scope"
									onchange="PF('availableViewpointsTable').filter()" scrollHeight="120">
									<f:selectItems value="#{viewpointController.scopeItems}" />
								</p:selectCheckboxMenu>
							</f:facet>
							<h:outputText value="#{viewpoint.scope.name}" />
						</p:column>


						<p:rowExpansion>
							<p:panelGrid columns="2"
								style="width:100%; border:1px solid gray !important;"
								columnClasses="viewpointInfoLeft, viewpointInfoRight">

								<h:outputText value="Scope" />
								<h:outputText value="#{viewpoint.scope.name}" />
								<h:outputText value="Explanation" />
								<h:outputText value="#{viewpoint.explanation}" />

								<h:outputText value="Example" />
								<p:graphicImage
									value="#{viewpointController.getExampleImage(viewpoint.example)}"
									stream="false" />

							</p:panelGrid>
						</p:rowExpansion>

					</p:dataTable>
				</p:outputPanel>
			</p:panelGrid>

		</p:panel>

	</p:tab>
</ui:composition>